<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to After Dark's Quoting Journal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container d-flex justify-content-center align-items-center min-vh-100">
        <div class="card shadow-lg p-4" style="max-width: 800px; width: 100%;">
            <h1 class="text-center">Rate That Quote! 🎪</h1>
            <i class="text-center mb-4">Signed in as {{username}}.</i>

            <blockquote class="blockquote text-center">
                <p class="mb-3">"{{quote.content}}"</p>  <!-- Adjust key based on your DynamoDB schema -->
                <footer class="blockquote-footer">{{quote.user}}</footer>
            </blockquote>

            {{!-- <p class="text-center mb-3"><strong>Out of 1 to 10 Malcolm Cockgrabber Emojis</strong></p> --}}
            <style>
                .rating-container {
                    display: flex;
                    gap: 10px;
                    align-items: center;
                    justify-content: center;
                }

                /* Hide default radio buttons */
                input[type="radio"] {
                    display: none;
                }

                /* Image styling */
                .rating-label img {
                    width: 50px; /* Adjust size as needed */
                    height: auto;
                    cursor: pointer;
                    transition: transform 0.2s ease;
                }

                /* Highlight selected radio button */
                input[type="radio"]:checked + img {
                    transform: scale(1.1);
                    border: 2px solid #007bff;
                    border-radius: 5px;
                }

                /* Number styling */
                .rating-label {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                }

            </style>
            </head>
            <body>

                <form id="rating-form" action="/quote/{{quote.message_id}}" method="POST" class="d-flex flex-column align-items-center">
                    <input type="hidden" name="message_id" value="{{quote.message_id}}">
                      
                    <div class="rating-container">
                    <div class="rating-label-container">
                        <label class="rating-label" for="rating">
                        <strong><span>Rating: <span id="rating-value">5</span></span></strong>
                        </label>
                    </div><br>
                    
                    <input type="range" id="rating" name="rating" min="1" max="10" value="5" step="1">
                    </div>
                    
                    
                    {{!-- <div class="rating-container">
                        <label class="rating-label">
                            <input type="radio" name="rating" value="1">
                            <img src="./img/rating.png" alt="1">
                            <span>1</span>
                        </label>

                        <label class="rating-label">
                            <input type="radio" name="rating" value="2">
                            <img src="./img/rating.png" alt="2">
                            <span>2</span>
                        </label>

                        <label class="rating-label">
                            <input type="radio" name="rating" value="3">
                            <img src="./img/rating.png" alt="3">
                            <span>3</span>
                        </label>

                        <label class="rating-label">
                            <input type="radio" name="rating" value="4">
                            <img src="./img/rating.png" alt="4">
                            <span>4</span>
                        </label>

                        <label class="rating-label">
                            <input type="radio" name="rating" value="5">
                            <img src="./img/rating.png" alt="5">
                            <span>5</span>
                        </label>

                        <label class="rating-label">
                            <input type="radio" name="rating" value="6">
                            <img src="./img/rating.png" alt="6">
                            <span>6</span>
                        </label>
                            <label class="rating-label">
                            <input type="radio" name="rating" value="7">
                            <img src="./img/rating.png" alt="7">
                            <span>7</span>
                        </label>
                            <label class="rating-label">
                            <input type="radio" name="rating" value="8">
                            <img src="./img/rating.png" alt="8">
                            <span>8</span>
                        </label>
                            <label class="rating-label">
                            <input type="radio" name="rating" value="9">
                            <img src="./img/rating.png" alt="9">
                            <span>9</span>
                        </label>
                            <label class="rating-label">
                            <input type="radio" name="rating" value="10">
                            <img src="./img/rating.png" alt="10">
                            <span>10</span>
                        </label>
                    </div> --}}
                    <button type="submit" class="mt-5 btn btn-success" id="submit-btn">Submit Rating</button>
                </form>
            </body>
            </html>

            <!-- Footer Disclaimer -->
            <div class="mt-4 pt-3 border-top">
                <div class="alert alert-warning mb-0" role="alert">
                    <small><strong>Disclaimer:</strong> These quotes are collected for entertainment purposes only and do not represent the actual beliefs or opinions of the individuals mentioned. Content should not be shared outside of this platform.</small>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
    const ratingSlider = document.getElementById('rating');
    const ratingValue = document.getElementById('rating-value');
    const form = document.getElementById('rating-form');
    const submitBtn = document.getElementById('submit-btn');

    ratingSlider.addEventListener('input', function() {
    let value = ratingSlider.value;
    let emoji = '';

    // Determine which emoji to show based on the value
    if (value == 10) {
        emoji = '🔥'; // Fire emoji
    } else if (value == 1) {
        emoji = '🍆'; // Eggplant emoji
    } else {
        emoji = ''; // No emoji for other values
    }

    // Update the rating value with emoji
    ratingValue.textContent = `${value} ${emoji}`;
    });

    // Confetti celebration function
    function celebrateRating() {
        // Main confetti burst
        confetti({
            particleCount: 150,
            spread: 160,
            origin: { x: 0.5, y: 0.8 },
            colors: ['#28a745', '#ffc107', '#007bff', '#dc3545', '#6f42c1']
        });

        // Additional side bursts
        setTimeout(() => {
            confetti({
                particleCount: 75,
                spread: 100,
                origin: { x: 0.2, y: 0.6 },
                colors: ['#28a745', '#ffc107', '#007bff', '#dc3545', '#6f42c1']
            });
        }, 200);

        setTimeout(() => {
            confetti({
                particleCount: 75,
                spread: 100,
                origin: { x: 0.8, y: 0.6 },
                colors: ['#28a745', '#ffc107', '#007bff', '#dc3545', '#6f42c1']
            });
        }, 400);
    }

    // Handle form submission with confetti
    form.addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent immediate submission

        // Disable submit button
        submitBtn.disabled = true;
        submitBtn.textContent = 'Rating Submitted! 🎉';

        // Start confetti celebration
        celebrateRating();

        // Submit form after celebration
        setTimeout(() => {
            form.submit();
        }, 2500);
    });
    </script>
    <style>
/* Center the whole rating container */
.rating-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  width: 100%;
}

/* Center the rating label above the slider */
.rating-label-container {
  margin-bottom: 10px; /* Space between label and slider */
}

/* Style the range input slider */
#rating {
  -webkit-appearance: none;
  width: 80%; /* Adjust the width */
  height: 8px; /* Set the slider height */
  background: #ddd; /* Light gray background */
  outline: none;
  border-radius: 10px; /* Rounded corners */
  transition: background 0.3s ease;
}

/* Style the thumb (the knob on the slider) */
#rating::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 50px; /* Set the width of the image */
  height: 50px; /* Set the height of the image */
  border-radius: 0%; /* Remove border-radius to make it square */
  background-image: url('./img/rating.png'); /* Replace with your image path */
  background-size: cover; /* Ensure the image covers the thumb */
  background-position: center; /* Center the image */
  cursor: pointer;
  transition: background 0.3s ease;
}

#rating::-moz-range-thumb {
  width: 50px; /* Set the width of the image */
  height: 50px; /* Set the height of the image */
  border-radius: 0%; /* Remove border-radius to make it square */
  background-image: url('./img/rating.png'); /* Replace with your image path */
  background-size: cover; /* Ensure the image covers the thumb */
  background-position: center; /* Center the image */
  cursor: pointer;
}

/* Change color of the thumb when hovered */


#rating:hover::-moz-range-thumb {
  background: #45a049;
}

/* Change color of the slider track when hovered */
#rating:hover {
  background: #4CAF50;
}
    </style>
</body>
</html>